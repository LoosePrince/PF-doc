# PF-MCDR-WebUI
为 MCDR 开发的在线 WebUI 插件

## 善用搜索功能

![](/src/搜索示例-1.png)

## 插件说明

### 主要功能
> 为MCDR提供一个 `在线WebUI管理界面` 和 `MCDR插件管理` 和 `表单配置功能`（可选使用在线编辑器）。

#### pip包管理

#### 本地插件管理

- [x] 列出全部插件
- [x] 一键更新
- [x] 启动插件
- [x] 停止插件
- [x] 重载插件
- [x] 切换插件版本（第三方仓库于v1.4.3版本后支持）
- [x] 插件配置文件的在线编辑器
- [x] 插件配置文件的在线表单

#### 表单配置功能

- [x] **配置修改:** 使用在线表单 **或** 在线编辑器进行配置文件的修改（在 **`所有插件`** 选项卡处修改）。
- [x] **支持的配置:** `yaml` 、 `json` 、 `html`


#### 服务器终端

- [x] 提供服务器命令执行界面
- [x] 支持RCON实时反馈和命令历史记录。
  
#### 服务器聊天页（/chat）

- **页面入口**: 路径`/chat`
- **适配**: 桌面端与移动端（移动端自动隐藏部分说明文案，输入区自适应堆叠）
- **功能概览**:
  - 验证码绑定三步流程：获取验证码 → 游戏内执行验证 → 设置密码
  - 账号登录：使用玩家ID + 密码直接登录
  - 聊天：
    - 实时拉取新消息（1秒刷新一次）
    - 历史消息分页加载
    - 发送消息到游戏（需后台开启权限）
  - 头像源切换：
    - Crafatar（使用玩家UUID）
    - MCCAG（使用玩家ID，来源 `https://x.xzt.plus/api/generate/minimal/mojang/<playerId>`，前端做贴边裁剪）
  - MC 样式开关：
    - 标准样式：卡片气泡、圆角、阴影
    - MC 样式：行内“[头像][时间] <玩家ID> 消息内容” 无背景
- **前端行为与本地偏好**:
  - 主题：`localStorage.darkMode`
  - 头像源：`localStorage.chat_avatar_source`（`crafatar` | `mccag`）
  - MC 样式：`localStorage.chat_mc_style`（`true` | `false`）
- **已知限制**: MCCAG 头像存在默认边距，已在前端做裁剪放大处理（`scale-150`）。

#### AI辅助

- [x] 终端集成DeepSeek AI接口
- [x] 支持日志分析和问题解答，减少您的反复横跳。

#### 主题切换

- [x] 支持`浅色主题`、`深色主题`，默认为浅色，您可以在右上角切换显示模式

#### 在线插件安装仓库

- [x] 提供一个插件安装管理器
- [x] 插件搜索、安装、卸载、更新、查看插件信息。
- [x] 多仓库支持，您可以添加多个仓库，并选择不同的仓库进行插件安装，不过请您注意风险。（v1.3.4）

> [IMPORTANT]关于数据
> 
> 重载插件 *本插件* **会** 自动更新 `guguwebui_static` 文件夹中的内容，如果您修改过内部的文件请自行保存，以防您的数据丢失。

> [IMPORTANT]关于V1.3.0版本
> 
> 本项目于v1.3.0版本重构前端，如您是从v1.3.0版本之前升级的，请删除 `guguwebui_static` 文件夹中的内容，保留 `db.json` 即可。